{{ header }}{{ separate_column_left }}
{% if chkIsPartner %}

{% if (separate_view is defined and separate_view) %}
  <div class="container-fluid" id="content">
{% else %}
  <div class="container">
{% endif %}

  <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
    <li><a href="{{ breadcrumb['href'] }}">{{ breadcrumb['text'] }}</a></li>
    {% endfor %}
  </ul>

  {% if (error_warning) %}
      <div class="alert alert-danger">
        <i class="fa fa-exclamation-circle">
        </i>{{ error_warning }}
      </div>
  {% endif %}

  {% if marketplace_product_reapprove %}
    <div class="alert alert-info">
      <i class="fa fa-info-circle"></i>
      {{ marketplace_product_reapprove }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
  {% endif %}

  {% if success %}
    <div class="alert alert-success">
      <i class="fa fa-check-circle"> </i> {{ success }}
    </div>
  {% endif %}

  <div class="row">{{ column_left }}
    {% if (column_left and column_right) %}
    {% set class = 'col-sm-6' %}
    {% elseif (column_left or column_right) %}
    {% set class = 'col-sm-9' %}
    {% else %}
    {% set class = 'col-sm-12' %}
    {% endif %}

    <div id="content" class="{{ class }}">
      {{ content_top }}

      <h1>
        {{ heading_title }}
        <div class="pull-right">
          <a onclick="$('#form-save').submit();" data-toggle="tooltip" class="btn {{ product_id ? 'btn-info' : 'btn-success' }}" title="{{ button_continue }}" id="submit"><i class="fa fa-save"></i></a>
          <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_back }}" class="btn btn-default" data-original-title="Cancel"><i class="fa fa-reply"></i></a>
        </div>
      </h1>

    <fieldset>

    <legend><i class="fa fa-pencil"></i> {{ heading_title }}</legend>

    {% if access_error is not defined and isMember %}
    <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-save" class="form-horizontal">

      {% if (module_wk_seller_group_status is defined and module_wk_seller_group_status) %}
          <input type="hidden" value="{% if (isClone is defined and isClone) %} {{ isClone }}{% endif %}" name="clone">
          <input type="hidden" value="{% if (isRelist is defined and isRelist) %} {{ isRelist }}{% endif %}" name="relist">
          <input type="hidden" value="{% if (isEdit is defined and isEdit) %} {{ isEdit }}{% endif %}" name="edit">
      {% endif %}

      <ul class="nav nav-tabs" id="nav_tabs">
        <li class="active"><a href="#tab-general" data-toggle="tab">{{ tab_general }}</a></li>
        <li><a href="#tab-data" data-toggle="tab">{{ tab_data }}</a></li>

        {% if (mp_allowproducttabs['links'] is defined) %}
          <li><a href="#tab-links" data-toggle="tab">{{ tab_links }}</a></li>
        {% endif %}

        {% if (mp_allowproducttabs['attribute'] is defined) %}
         <li> <a href="#tab-attribute" data-toggle="tab">{{ tab_attribute }}</a></li>
        {% endif %}

        {% if (mp_allowproducttabs['options'] is defined) %}
          <li><a href="#tab-option" data-toggle="tab">{{ tab_option }}</a></li>
        {% endif %}

        {% if (mp_allowproducttabs['discount'] is defined) %}
         <li> <a href="#tab-discount" data-toggle="tab">{{ tab_discount }}</a></li>
        {% endif %}

        {% if (mp_allowproducttabs['special'] is defined) %}
          <li><a href="#tab-special" data-toggle="tab">{{ tab_special }}</a></li>
        {% endif %}

        {% if (mp_allowproducttabs['images'] is defined) %}
          <li> <a href="#tab-image" data-toggle="tab">{{ tab_image }}</a>   </li>
        {% endif %}

        {% if (mp_allowproducttabs['custom-field'] is defined) %}
          <li><a href="#tab-custom-field" data-toggle="tab">{{ text_custom_field }}</a></li>
        {% endif %}

        {% if wk_pricealert_status and wk_pricealert_allowed_seller %}
          <li><a href="#tab-pricealert" data-toggle="tab">{{ tab_palert }}</a></li>
        {% endif %}

        <li><a href="#tab-update-reason" data-toggle="tab">{{ tab_reason }}</a></li>

      </ul>

      <div class="tab-content">
        <div class="tab-pane active" id="tab-general">
          <ul class="nav nav-tabs" id="languages">
            {% set count = 0 %} {% for language in languages %}
            <li class="{% if (count == 0) %} {{ 'active' }}{% endif %} {% set count = count + 1 %}">
              <a href="#language{{ language['language_id'] }}" data-toggle="tab">
                <img src="catalog/language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" />
                {{ language['name'] }}</a>
            </li>
            {% endfor %}
          </ul>
          <div class="tab-content">
            {% set count = 0 %} {% for language in languages %}
            <div class="tab-pane {% if (count == 0) %} {{ 'active' }}{% endif %} {% set count = count + 1 %}" id="language{{ language['language_id'] }}">
              <div class="form-group required">
                <label class="col-sm-3 control-label" for="input-name{{ language['language_id'] }}">{{ entry_name }}</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" name="product_description[{{ language['language_id'] }}][name]" value="{{ product_description[language['language_id']] is defined ? product_description[language['language_id']]['name'] : '' }}" placeholder="{{ entry_name }}" id="input-name{{ language['language_id'] }}" />
                  {% if (error_name[language['language_id']] is defined) %}
                  <div class="text-danger">{{ error_name[language['language_id']] }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-description{{ language['language_id'] }}">{{ entry_description }}</label>
                <div class="col-sm-9">
                  <textarea name="product_description[{{ language['language_id'] }}][description]" placeholder="{{ entry_description }}" id="input-description{{ language['language_id'] }}" class="form-control">{{ product_description[language['language_id']] is defined ? product_description[language['language_id']]['description'] : '' }}</textarea>
                </div>
              </div>

              <div class="form-group required">
                <label class="col-sm-3 control-label" for="input-meta-description{{ language['language_id'] }}">{{ entry_meta_title }}</label>
                <div class="col-sm-9">
                  <input type="text" name="product_description[{{ language['language_id'] }}][meta_title]"  placeholder="{{ entry_meta_title }}" id="input-meta-description{{ language['language_id'] }}" class="form-control" value="{{ product_description[language['language_id']] is defined ? product_description[language['language_id']]['meta_title'] : '' }}" />
                  {% if (error_meta_title[language['language_id']] is defined) %}
                  <div class="text-danger">{{ error_meta_title[language['language_id']] }}</div>
                  {% endif %}
                </div>
              </div>

              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-meta-description{{ language['language_id'] }}">{{ entry_meta_description }}</label>
                <div class="col-sm-9">
                  <textarea name="product_description[{{ language['language_id'] }}][meta_description]" rows="5" placeholder="{{ entry_meta_description }}" id="input-meta-description{{ language['language_id'] }}" class="form-control">{{ product_description[language['language_id']] is defined ? product_description[language['language_id']]['meta_description'] : '' }}</textarea>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-meta-keyword{{ language['language_id'] }}">{{ entry_meta_keyword }}</label>
                <div class="col-sm-9">
                  <textarea name="product_description[{{ language['language_id'] }}][meta_keyword]" rows="5" placeholder="{{ entry_meta_keyword }}" id="input-meta-keyword{{ language['language_id'] }}" class="form-control">{{ product_description[language['language_id']] is defined ? product_description[language['language_id']]['meta_keyword'] : '' }}</textarea>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-tag{{ language['language_id'] }}"><span data-toggle="tooltip" title="{{ help_tag }}">{{ entry_tag }}</span></label>
                <div class="col-sm-9">
                  <input class="form-control" type="text" name="product_description[{{ language['language_id'] }}][tag]" value="{{ product_description[language['language_id']] is defined ? product_description[language['language_id']]['tag'] : '' }}" placeholder="{{ entry_tag }}" id="input-tag{{ language['language_id'] }}" />
                </div>
              </div>
            </div>
            {% endfor %}
          </div><!--tab-content-language-->
        </div>

        <div class="tab-pane" id="tab-data">
          <div class="form-group required">
            <label class="col-sm-3 control-label" for="input-model">{{ entry_model }}</label>
            <div class="col-sm-9">
              <input type="text" name="model" value="{{ model }}" placeholder="{{ entry_model }}" id="input-model" class="form-control" />
              {% if (error_model) %}
              <div class="text-danger">{{ error_model }}</div>
              {% endif %}
            </div>
          </div>
          {% if (mp_allowproductcolumn['sku'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-sku"><span data-toggle="tooltip" title="{{ help_sku }}">{{ entry_sku }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="sku" value="{{ sku }}" placeholder="{{ entry_sku }}" id="input-sku" class="form-control" />
            </div>
          </div>
          {% endif %}
          {% if (mp_allowproductcolumn['upc'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-upc"><span data-toggle="tooltip" title="{{ help_upc }}">{{ entry_upc }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="upc" value="{{ upc }}" placeholder="{{ entry_upc }}" id="input-upc" class="form-control" />
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['ean'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-ean"><span data-toggle="tooltip" title="{{ help_ean }}">{{ entry_ean }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="ean" value="{{ ean }}" placeholder="{{ entry_ean }}" id="input-ean" class="form-control" />
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['jan'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-jan"><span data-toggle="tooltip" title="{{ help_jan }}">{{ entry_jan }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="jan" value="{{ jan }}" placeholder="{{ entry_jan }}" id="input-jan" class="form-control" />
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['isbn'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-isbn"><span data-toggle="tooltip" title="{{ help_isbn }}">{{ entry_isbn }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="isbn" value="{{ isbn }}" placeholder="{{ entry_isbn }}" id="input-isbn" class="form-control" />
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['mpn'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-mpn"><span data-toggle="tooltip" title="{{ help_mpn }}">{{ entry_mpn }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="mpn" value="{{ mpn }}" placeholder="{{ entry_mpn }}" id="input-mpn" class="form-control" />
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['location'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-location">{{ entry_location }}</label>
            <div class="col-sm-9">
              <input type="text" name="location" value="{{ location }}" placeholder="{{ entry_location }}" id="input-location" class="form-control" />
               <input type="hidden" name="prevPrice" value="{{ prevPrice }}" />
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['price'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-price">{{ entry_price }}</label>
            <div class="col-sm-9">
              <input type="text" name="price" value="{{ price }}" placeholder="{{ entry_price }}" id="input-price" class="form-control" />
              <input type="hidden" name="prevPrice" value="{{ prevPrice }}" />
            </div>
          </div>
           {% endif %}
            <!-- membership codes starts here -->
            {% if (module_wk_seller_group_status) %}
            <div class="form-group">
              <label class="col-sm-3 control-label" for="input-expiring-date">{{ entry_expiring_date }}</label>
              <div class="col-sm-9">
                <input type="text" name="expiry_date" value="{{ expiry_date }}" placeholder="{{ entry_expiring_date }}" id="input-expiring-date" class="form-control" disabled/>
              </div>
            </div>
            <div class="form-group">
              <label class="col-sm-3 control-label" for="input-relist-date">{{ entry_relist_duration }}</label>
              <div class="col-sm-9">
                <select name="relist_duration" class="form-control" id="input-relist-duration">

                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="col-sm-3 control-label" for="input-auto-relist">{{ entry_auto_relist }}</label>
              <div class="col-sm-9">
                <div class="checkbox">
                  <label for="input-auto-relist">
                    <input type="checkbox" name="auto_relist" id="input-auto-relist">
                    {{ entry_auto_relist_lable }}
                  </label>
                </div>
              </div>
            </div>
           {% endif %}
            <!-- membership codes ends here -->
          {% if (mp_allowproductcolumn['tax_class_id'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-tax-class">{{ entry_tax_class }}</label>
            <div class="col-sm-9">
              <select name="tax_class_id" id="input-tax-class" class="form-control">
                <option value="0">{{ text_none }}</option>
                {% for tax_class in tax_classes %}
                {% if (tax_class['tax_class_id'] == tax_class_id) %}
                <option value="{{ tax_class['tax_class_id'] }}" selected="selected">{{ tax_class['title'] }}</option>
                {% else %}
                <option value="{{ tax_class['tax_class_id'] }}">{{ tax_class['title'] }}</option>
                {% endif %}
                {% endfor %}
              </select>
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['quantity'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-quantity">{{ entry_quantity }}</label>
            <div class="col-sm-9">
              <input type="text" name="quantity" value="{{ quantity }}" placeholder="{{ entry_quantity }}" id="input-quantity" class="form-control" />

               <!-- Membership code -->
              {% if (module_wk_seller_group_status is defined and marketplace_account_menu_sequence is defined and ( 'membership' in marketplace_account_menu_sequence|keys)) %}
                <input type="hidden" name="prevQuantity" id="prevQuantity" value="{{ prevQuantity }}"/>
                <a href="#myModalanswer" id="showerror" role="button" class="hide tfbutton tfbuttonborder asub" data-toggle="modal"></a>
              {% endif %}
              <!--  -->
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['minimum'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-minimum"><span data-toggle="tooltip" title="{{ help_minimum }}">{{ entry_minimum }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="minimum" value="{{ minimum }}" placeholder="{{ entry_minimum }}" id="input-minimum" class="form-control" />
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['subtract'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-subtract">{{ entry_subtract }}</label>
            <div class="col-sm-9">
              <select name="subtract" id="input-subtract" class="form-control">
                {% if (subtract) %}
                <option value="1" selected="selected">{{ text_yes }}</option>
                <option value="0">{{ text_no }}</option>
                {% else %}
                <option value="1">{{ text_yes }}</option>
                <option value="0" selected="selected">{{ text_no }}</option>
                {% endif %}
              </select>
            </div>
          </div>
           {% endif %}

           {% if (mp_allowproductcolumn['status'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-status">{{ entry_status }}</label>
            <div class="col-sm-9">
              <select name="status" id="input-status" class="form-control">
                {% if (status) %}
                <option value="1" selected="selected">{{ text_enabled }}</option>
                <option value="0">{{ text_disabled }}</option>
                {% else %}
                <option value="1">{{ text_enabled }}</option>
                <option value="0" selected="selected">{{ text_disabled }}</option>
                {% endif %}
              </select>
            </div>
          </div>
          {% endif %}

          {% if (mp_allowproductcolumn['stock_status_id'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-stock-status"><span data-toggle="tooltip" title="{{ help_stock_status }}">{{ entry_stock_status }}</span></label>
            <div class="col-sm-9">
              <select name="stock_status_id" id="input-stock-status" class="form-control">
                {% for stock_status in stock_statuses %}
                {% if (stock_status['stock_status_id'] == stock_status_id) %}
                <option value="{{ stock_status['stock_status_id'] }}" selected="selected">{{ stock_status['name'] }}</option>
                {% else %}
                <option value="{{ stock_status['stock_status_id'] }}">{{ stock_status['name'] }}</option>
                {% endif %}
                {% endfor %}
              </select>
            </div>
          </div>
          {% endif %}
          {% if (mp_allowproductcolumn['shipping'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label">{{ entry_shipping }}</label>
            <div class="col-sm-9">
              <label class="radio-inline">
                {% if (shipping) %}
                <input type="radio" name="shipping" value="1" checked="checked" />
                {{ text_yes }}
                {% else %}
                <input type="radio" name="shipping" value="1" />
                {{ text_yes }}
                {% endif %}
              </label>
              <label class="radio-inline">
                {% if (not shipping) %}
                <input type="radio" name="shipping" value="0" checked="checked" />
                {{ text_no }}
                {% else %}
                <input type="radio" name="shipping" value="0" />
                {{ text_no }}
                {% endif %}
              </label>
            </div>
          </div>
           {% endif %}
          {% if (mp_allowproductcolumn['keyword'] is defined) %}
          {% for language in languages %}
            <div class="form-group">
              <label class="col-sm-3 control-label" for="input-keyword"><span data-toggle="tooltip" title="{{ help_keyword}}">{{ entry_keyword}}</span></label>
              <div class="col-sm-9 input-group">
                <span class="input-group-addon">
                  <img src="catalog/language/{{ language['code']}}/{{ language['code']}}.png" title="{{ language['name']}}" />
                </span>
                <input type="text" name="keyword[{{ current_store }}][{{language['language_id']}}]" value="{{ keyword[current_store][language['language_id']]}}" placeholder="{{ entry_keyword}}" id="input-keyword" class="form-control" />
                {% if error_keyword %}
                  <div class="text-danger">{{ error_keyword}}</div>
                {% endif %}
              </div>
            </div>
          {% endfor %}
          {% endif %}
          {% if (mp_allowproductcolumn['image'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-keyword">{{ entry_image }}</label>
            <div class="col-sm-9">
              <div style="width:110px;height:110px;overflow:hidden" class="img-thumbnail wk_upload_img">
                <img id="image-thumb-image" src="{{ thumb }}" alt="" title=""/>
              </div>
              <input type="hidden" name="image" value="{{ thumb_img }}" id="image-target-image"/>
              <div class="btn-group imgoption">
                <button class="btn btn-danger btn-sm delete_img" type="button">Remove</button>
              </div>
            </div>
          </div>
          {% endif %}
          {% if (mp_allowproductcolumn['date_available'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-date-available">{{ entry_date_available }}</label>
            <div class="col-sm-9">
              <div class="input-group data-date">
                <input type="text" name="date_available" value="{{ date_available }}" placeholder="{{ entry_date_available }}" data-date-format="YYYY-MM-DD" id="input-date-available" class="form-control" />
                <span class="input-group-btn">
                <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                </span></div>
            </div>
          </div>
          {% endif %}
          {% if (mp_allowproductcolumn['length'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-length">{{ entry_dimension }}</label>
            <div class="col-sm-9">
              <div class="row">
                <div class="col-sm-4">
                  <input type="text" name="length" value="{{ length }}" placeholder="{{ help_length }}" id="input-length" class="form-control" />
                </div>
                <div class="col-sm-4">
                  <input type="text" name="width" value="{{ width }}" placeholder="{{ help_width }}" id="input-width" class="form-control" />
                </div>
                <div class="col-sm-4">
                  <input type="text" name="height" value="{{ height }}" placeholder="{{ help_height }}" id="input-height" class="form-control" />
                </div>
              </div>
            </div>
          </div>
          {% endif %}
          {% if (mp_allowproductcolumn['length_class_id'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-length-class">{{ entry_length }}</label>
            <div class="col-sm-9">
              <select name="length_class_id" id="input-length-class" class="form-control">
                {% for length_class in length_classes %}
                {% if (length_class['length_class_id'] == length_class_id) %}
                <option value="{{ length_class['length_class_id'] }}" selected="selected">{{ length_class['title'] }}</option>
                {% else %}
                <option value="{{ length_class['length_class_id'] }}">{{ length_class['title'] }}</option>
                {% endif %}
                {% endfor %}
              </select>
            </div>
          </div>
          {% endif %}
          {% if (mp_allowproductcolumn['weight'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-weight">{{ entry_weight }}</label>
            <div class="col-sm-9">
              <input type="text" name="weight" value="{{ weight }}" placeholder="{{ help_weight }}" id="input-weight" class="form-control" />
            </div>
          </div>
          {% endif %}
          {% if (mp_allowproductcolumn['weight_class_id'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-weight-class">{{ entry_weight_class }}</label>
            <div class="col-sm-9">
              <select name="weight_class_id" id="input-weight-class" class="form-control">
                {% for weight_class in weight_classes %}
                {% if (weight_class['weight_class_id'] == weight_class_id) %}
                <option value="{{ weight_class['weight_class_id'] }}" selected="selected">{{ weight_class['title'] }}</option>
                {% else %}
                <option value="{{ weight_class['weight_class_id'] }}">{{ weight_class['title'] }}</option>
                {% endif %}
                {% endfor %}
              </select>
            </div>
          </div>
          {% endif %}

          {% if (mp_allowproductcolumn['sort_order'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-sort-order">{{ entry_sort_order }}</label>
            <div class="col-sm-9">
              <input type="text" name="sort_order" value="{{ sort_order }}" placeholder="{{ entry_sort_order }}" id="input-sort-order" class="form-control" />
            </div>
          </div>
          {% endif %}

        </div>

        <!-- link tab -->
        {% if (mp_allowproducttabs['links'] is defined) %}
        <input type="hidden" name="product_link_tab" value="1">
        <div class="tab-pane" id="tab-links">
          {% if (mp_allowproductcolumn['manufacturer_id'] is defined) %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-manufacturer"><span data-toggle="tooltip" title="{{ help_manufacturer }}">{{ entry_manufacturer }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="manufacturer" value="{{ manufacturer }}" placeholder="{{ entry_manufacturer }}" id="input-manufacturer" class="form-control" />
              <input type="hidden" name="manufacturer_id" value="{{ manufacturer_id }}" />
            </div>
          </div>
          {% endif %}
          <div class="form-group {% if (category_required) %}required{% endif %}">
            <label class="col-sm-3 control-label" for="input-category"><span data-toggle="tooltip" title="{{ help_category }}">{{ entry_category }}</span></label>
            <div class="col-sm-9">
              <a id="input-category" class="btn btn-primary" data-toggle="modal" data-target="#category-modal" style="margin-bottom: 10px;">{{ text_addcategory }} </a>
              <div id="product-category" class="well well-sm" style="height: 150px; overflow: auto;">
                {% for product_category in product_categories %}
                <div id="product-category{{ product_category['category_id'] }}" ><i class="fa fa-minus-circle "></i>{{ product_category['name'] }}
                  <input type="hidden" name="product_category[]" value="{{ product_category['category_id'] }}" />
                </div>
                {% endfor %}
              </div>
              {% if (error_category) %}
              <div class="text-danger">{{ error_category }}</div>
              {% endif %}
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-filter"><span data-toggle="tooltip" title="{{ help_filter }}">{{ entry_filter }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="filter" value="" placeholder="{{ entry_filter }}" id="input-filter" class="form-control" />
              <div id="product-filter" class="well well-sm" style="height: 150px; overflow: auto;">
                {% for product_filter in product_filters %}
                <div id="product-filter{{ product_filter['filter_id'] }}"><i class="fa fa-minus-circle"></i> {{ product_filter['name'] }}
                  <input type="hidden" name="product_filter[]" value="{{ product_filter['filter_id'] }}" />
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
         {% if (marketplace_seller_product_store is defined and marketplace_seller_product_store and marketplace_seller_product_store == 'choose_store') %}
         <div class="form-group">
              <label class="col-sm-3 control-label">{{ entry_store }}</label>
              <div class="col-sm-9">
                <div class="well well-sm" style="height: 150px; overflow: auto;">
                  <div class="checkbox">
                    <label>
                      {% if ((0 in product_store)) %}
                      <input type="checkbox" name="product_store[]" value="0" checked="checked" />
                      {{ text_default }}
                      {% else %}
                      <input type="checkbox" name="product_store[]" value="0" />
                      {{ text_default }}
                      {% endif %}
                    </label>
                  </div>
                  {% for store in stores %}
                  <div class="checkbox">
                    <label>
                      {% if ((store['store_id'] in product_store)) %}
                      <input type="checkbox" name="product_store[]" value="{{ store['store_id'] }}" checked="checked" />
                      {{ store['name'] }}
                      {% else %}
                      <input type="checkbox" name="product_store[]" value="{{ store['store_id'] }}" />
                      {{ store['name'] }}
                      {% endif %}
                    </label>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
           {% endif %}
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-download"><span data-toggle="tooltip" title="{{ help_download }}">{{ entry_download }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="download" value="" placeholder="{{ entry_download }}" id="input-download" class="form-control" />
              <div id="product-download" class="well well-sm" style="height: 150px; overflow: auto;">
                {% for product_download in product_downloads %}
                <div id="product-download{{ product_download['download_id'] }}"><i class="fa fa-minus-circle"></i> {{ product_download['name'] }}
                  <input type="hidden" name="product_download[]" value="{{ product_download['download_id'] }}" />
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-related"><span data-toggle="tooltip" title="{{ help_related }}">{{ entry_related }}</span></label>
            <div class="col-sm-9">
              <input type="text" name="related" value="" placeholder="{{ entry_related }}" id="input-related" class="form-control" />
              <div id="product-related" class="well well-sm" style="height: 150px; overflow: auto;">
                {% set class = 'odd' %}
                {% for product_related in product_relateds %}
                {% set class = class == 'even' ? 'odd' : 'even' %}
                <div id="product-related{{ product_related['product_id'] }}" class="{{ class }}"><i class="fa fa-minus-circle"></i> {{ product_related['name'] }}
                  <input type="hidden" name="product_related[]" value="{{ product_related['product_id'] }}" />
                </div>
                {% endfor %}
              </div>
            </div>
          </div>

        </div>
        {% endif %}

        <!-- attribute tab -->
        {% if (mp_allowproducttabs['attribute'] is defined) %}
        <input type="hidden" name="product_attribute_tab" value="1">
        <div class="tab-pane" id="tab-attribute">
          <div class="table-responsive">
            <table id="attribute" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <td class="text-left">{{ entry_attribute }}</td>
                  <td class="text-left">{{ entry_text }}</td>
                  <td></td>
                </tr>
              </thead>

              {% set attribute_row = 0 %}
              {% for product_attribute in product_attributes %}
                <tbody id="attribute-row{{ attribute_row }}">
                  <tr>
                    <td class="text-left">
                      <input type="text" name="product_attribute[{{ attribute_row }}][name]" value="{{ product_attribute['name'] }}" placeholder="{{ entry_attribute }}" class="form-control"  />
                      <input type="hidden" name="product_attribute[{{ attribute_row }}][attribute_id]" value="{{ product_attribute['attribute_id'] }}" />
                    </td>
                    <td class="text-left">
                      {% for language in languages %}
                      <div class="input-group">
                      <span class="input-group-addon">
                        <img src="catalog/language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" />
                      </span>
                      <textarea name="product_attribute[{{ attribute_row }}][product_attribute_description][{{ language['language_id'] }}][text]" cols="40" rows="5" class="form-control">{{ product_attribute['product_attribute_description'][language['language_id']] is defined ? product_attribute['product_attribute_description'][language['language_id']]['text'] : '' }}</textarea>
                    </div>
                      {% endfor %}
                    </td>
                    <td class="text-left">
                      <button type="button" onclick="$('#attribute-row{{ attribute_row }}').remove(); $(\'.tooltip.in\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button>
                    </td>
                  </tr>
                </tbody>
              {% set attribute_row = attribute_row + 1 %}
              {% endfor %}
              <tfoot>
                <tr>
                  <td colspan="2"></td>
                  <td class="text-left">
                    <button type="button" onclick="addAttribute();" data-toggle="tooltip" title="{{ button_add_attribute }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button>
                  </td>
                </tr>
              </tfoot>
            </table>
          </div><!--table-responsive-->
        </div>
        {% endif %}

        <!-- option tab -->
        {% if (mp_allowproducttabs['options'] is defined) %}
        <input type="hidden" name="product_option_tab" value="1">
        <div class="tab-pane" id="tab-option">
          <div class="row">
            <div class="col-sm-3">
              <ul class="nav nav-pills nav-stacked" id="option">
                {% set option_row = 0 %}
                {% for product_option in product_options %}

                <li><a href="#tab-option{{ option_row }}" data-toggle="tab" id="option{{ option_row }}"><i class="fa fa-minus-circle" onclick="$('a[href=\'#tab-option{{ option_row }}\']').parent().remove(); $('#tab-option{{ option_row }}').remove(); $('#option a:first').tab('show');"></i> {{ product_option['name'] }}</a></li>
                {% set option_row = option_row + 1 %}
                {% endfor %}
                <li>
                  <input type="text" name="option" value="" placeholder="{{ button_add_option }}" id="input-option" class="form-control" />
                </li>
              </ul>
            </div>
            <div class="col-sm-9">
              <div class="tab-content">
                {% set option_row = 0 %}
                {% set option_value_row = 0 %}
                {% for product_option in product_options %}
                <div class="tab-pane" id="tab-option{{ option_row }}">
                  <input type="hidden" name="product_option[{{ option_row }}][product_option_id]" value="{{ product_option['product_option_id'] }}" />
                  <input type="hidden" name="product_option[{{ option_row }}][name]" value="{{ product_option['name'] }}" />
                  <input type="hidden" name="product_option[{{ option_row }}][option_id]" value="{{ product_option['option_id'] }}" />
                  <input type="hidden" name="product_option[{{ option_row }}][type]" value="{{ product_option['type'] }}" />
                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="input-required{{ option_row }}">{{ entry_required }}</label>
                    <div class="col-sm-9">
                      <select name="product_option[{{ option_row }}][required]" id="input-required{{ option_row }}" class="form-control">
                        {% if (product_option['required']) %}
                        <option value="1" selected="selected">{{ text_yes }}</option>
                        <option value="0">{{ text_no }}</option>
                        {% else %}
                        <option value="1">{{ text_yes }}</option>
                        <option value="0" selected="selected">{{ text_no }}</option>
                        {% endif %}
                      </select>
                    </div>
                  </div>

                     {% if (product_option['type'] == 'text') %}
                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                    <div class="col-sm-9">
                      <input type="text" name="product_option[{{ option_row }}][option_value]" value="{{ product_option['option_value'] }}" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control" />
                    </div>
                  </div>
                  {% endif %}
                  {% if (product_option['type'] == 'textarea') %}
                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                    <div class="col-sm-9">
                      <textarea name="product_option[{{ option_row }}][option_value]" rows="5" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control">{{ product_option['option_value'] }}</textarea>
                    </div>
                  </div>
                  {% endif %}
                  {% if (product_option['type'] == 'file') %}
                  <div class="form-group" style="display: none;">
                    <label class="col-sm-3 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                    <div class="col-sm-9">
                      <input type="text" name="product_option[{{ option_row }}][option_value]" value="{{ product_option['option_value'] }}" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control" />
                    </div>
                  </div>
                  {% endif %}
                  {% if (product_option['type'] == 'date') %}
                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                    <div class="col-sm-3">
                      <div class="input-group date">
                        <input type="text" name="product_option[{{ option_row }}][option_value]" value="{{ product_option['option_value'] }}" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD" id="input-value{{ option_row }}" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                        </span></div>
                    </div>
                  </div>
                  {% endif %}
                  {% if (product_option['type'] == 'time') %}
                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                    <div class="col-sm-9">
                      <div class="input-group time">
                        <input type="text" name="product_option[{{ option_row }}][option_value]" value="{{ product_option['option_value'] }}" placeholder="{{ entry_option_value }}" data-date-format="HH:mm" id="input-value{{ option_row }}" class="form-control" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                    </div>
                  </div>
                  {% endif %}
                   {% if (product_option['type'] == 'datetime') %}
                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                    <div class="col-sm-9">
                      <div class="input-group datetime">
                        <input type="text" name="product_option[{{ option_row }}][option_value]" value="{{ product_option['option_value'] }}" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-value{{ option_row }}" class="form-control" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                    </div>
                  </div>
                  {% endif %}
                  {% if (product_option['type'] == 'select' or product_option['type'] == 'radio' or product_option['type'] == 'checkbox' or product_option['type'] == 'image') %}
                  <div class="table-responsive">
                    <table id="option-value{{ option_row }}" class="table table-striped table-bordered table-hover">
                      <thead>
                        <tr>
                          <td class="text-left">{{ entry_option_value }}</td>
                          <td class="text-right">{{ entry_quantity }}</td>
                          <td class="text-left">{{ entry_subtract }}</td>
                          <td class="text-right">{{ entry_price }}</td>
                          <td class="text-right">{{ entry_option_points }}</td>
                          <td class="text-right">{{ entry_weight }}</td>
                          <td></td>
                        </tr>
                      </thead>
                      {% for product_option_value in product_option['product_option_value'] %}
                      <tbody id="option-value-row{{ option_value_row }}">
                        <tr>
                        <td class="text-left"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][option_value_id]" style="min-width: 60px;" class="form-control">
                              {% if (option_values[product_option['option_id']] is defined) %}
                                {% for option_value in option_values[product_option['option_id']] %}
                                {% if (option_value['option_value_id'] == product_option_value['option_value_id']) %}
                               <option value="{{ option_value['option_value_id'] }}" selected="selected">{{ option_value['name'] }}</option>
                                {% else %}
                                <option value="{{ option_value['option_value_id'] }}">{{ option_value['name'] }}</option>
                                {% endif %}
                                {% endfor %}
                                {% endif %}
                            </select>
                             <input type="hidden" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][product_option_value_id]" value="{{ product_option_value['product_option_value_id'] }}" /></td>
                        <td class="text-right"><input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][quantity]" value="{{ product_option_value['quantity'] }}" class="form-control"/></td>
                        <td class="text-left"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][subtract]" class="form-control">
                                {% if (product_option_value['subtract']) %}
                                <option value="1" selected="selected">{{ text_yes }}</option>
                                <option value="0">{{ text_no }}</option>
                                {% else %}
                                <option value="1">{{ text_yes }}</option>
                                <option value="0" selected="selected">{{ text_no }}</option>
                                {% endif %}
                              </select></td>
                        <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][price_prefix]" class="form-control">
                            {% if (product_option_value['price_prefix'] == '+') %}
                            <option value="+" selected="selected">+</option>
                            {% else %}
                            <option value="+">+</option>
                            {% endif %}
                            {% if (product_option_value['price_prefix'] == '-') %}
                            <option value="-" selected="selected">-</option>
                            {% else %}
                            <option value="-">-</option>
                            {% endif %}
                          </select>

                          <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][price]" value="{{ product_option_value['price'] }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                        <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][points_prefix]" class="form-control">
                            {% if (product_option_value['points_prefix'] == '+') %}
                            <option value="+" selected="selected">+</option>
                            {% else %}
                            <option value="+">+</option>
                            {% endif %}
                            {% if (product_option_value['points_prefix'] == '-') %}
                            <option value="-" selected="selected">-</option>
                            {% else %}
                            <option value="-">-</option>
                            {% endif %}
                          </select>
                          <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][points]" value="{{ product_option_value['points'] }}" placeholder="{{ entry_points }}" class="form-control"  /></td>
                        <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][weight_prefix]" class="form-control">
                            {% if (product_option_value['weight_prefix'] == '+') %}
                            <option value="+" selected="selected">+</option>
                            {% else %}
                            <option value="+">+</option>
                            {% endif %}
                            {% if (product_option_value['weight_prefix'] == '-') %}
                            <option value="-" selected="selected">-</option>
                            {% else %}
                            <option value="-">-</option>
                            {% endif %}
                          </select>
                          <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][weight]" value="{{ product_option_value['weight'] }}" placeholder="{{ entry_weight }}" class="form-control"  /></td>
                        <td class="text-left">
                          <button type="button" onclick="$('#option-value-row{{ option_value_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button>
                        </td>
                      </tr>
                    </tbody>
                    {% set option_value_row = option_value_row + 1 %}
                    {% endfor %}
                    <tfoot>
                        <tr>
                          <td colspan="6"></td>
                          <td class="text-left">
                            <button type="button" onclick="addOptionValue('{{ option_row }}');" data-toggle="tooltip" title="{{ button_add_option_value }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button>
                          </td>
                        </tr>
                      </tfoot>
                      </table>
                    </div>
                      <select id="option-values{{ option_row }}" style="display: none;">
                        {% if (option_values[product_option['option_id']] is defined) %}
                        {% for option_value in option_values[product_option['option_id']] %}
                        <option value="{{ option_value['option_value_id'] }}">{{ option_value['name'] }}</option>
                        {% endfor %}
                        {% endif %}
                      </select>
                      {% endif %}
                      </div><!--tab-pane-->
                    {% set option_row = option_row + 1 %}
                    {% endfor %}
              </div><!--tab-content-->
            </div><!--col-sm-9-->
          </div><!--Row-->
        </div>
        {% endif %}

        <!-- discount tab -->
        {% if (mp_allowproducttabs['discount'] is defined) %}
        <input type="hidden" name="product_discount_tab" value="1">
        <div class="tab-pane" id="tab-discount">
          <div class="table-responsive">
            <table id="discount" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <td class="text-left">{{ entry_customer_group }}</td>
                  <td class="text-right">{{ entry_quantity }}</td>
                  <td class="text-right" style="min-width:70px">{{ entry_priority }}</td>
                  <td class="text-right" style="min-width:80px">{{ entry_price }}</td>
                  <td class="text-left">{{ entry_date_start }}</td>
                  <td class="text-left">{{ entry_date_end }}</td>
                  <td></td>
                </tr>
              </thead>
              {% set discount_row = 0 %}
              {% for product_discount in product_discounts %}
              <tbody id="discount-row{{ discount_row }}">
              <tr>
                <td class="text-left"><select name="product_discount[{{ discount_row }}][customer_group_id]" class="form-control">
                    {% for customer_group in customer_groups %}
                    {% if (customer_group['customer_group_id'] == product_discount['customer_group_id']) %}
                    <option value="{{ customer_group['customer_group_id'] }}" selected="selected">{{ customer_group['name'] }}</option>
                    {% else %}
                    <option value="{{ customer_group['customer_group_id'] }}">{{ customer_group['name'] }}</option>
                    {% endif %}
                    {% endfor %}
                  </select></td>
                <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][quantity]" value="{{ product_discount['quantity'] }}" placeholder="{{ entry_quantity }}" class="form-control" /></td>
                <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][priority]" value="{{ product_discount['priority'] }}" placeholder="{{ entry_priority }}" class="form-control" /></td>
                <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][price]" value="{{ product_discount['price'] }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                <td class="text-left"><div class="input-group date">
                    <input type="text" name="product_discount[{{ discount_row }}][date_start]" value="{{ product_discount['date_start'] }}" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" />
                    <span class="input-group-btn">
                    <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                    </span></div></td>
                <td class="text-left"><div class="input-group date">
                    <input type="text" name="product_discount[{{ discount_row }}][date_end]" value="{{ product_discount['date_end'] }}" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" />
                    <span class="input-group-btn">
                    <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                    </span></div></td>
                <td class="text-left"><button type="button" onclick="$('#discount-row{{ discount_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
              </tr>
              </tbody>
              {% set discount_row = discount_row + 1 %}
              {% endfor %}
              <tfoot>
                <tr>
                  <td colspan="6"></td>
                  <td class="text-left"><button type="button" onclick="addDiscount();" data-toggle="tooltip" title="{{ button_add_discount }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div><!--tab-discount-->
        {% endif %}

        <!--tab-special-->
        {% if (mp_allowproducttabs['special'] is defined) %}
        <input type="hidden" name="product_special_tab" value="1">
        <div class="tab-pane" id="tab-special">
          <div class="table-responsive">
            <table id="special" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <td class="text-left">{{ entry_customer_group }}</td>
                  <td class="text-right" style="min-width:70px">{{ entry_priority }}</td>
                  <td class="text-right" style="min-width:80px">{{ entry_price }}</td>
                  <td class="text-left">{{ entry_date_start }}</td>
                  <td class="text-left">{{ entry_date_end }}</td>
                  <td></td>
                </tr>
              </thead>
                {% set special_row = 0 %}
                {% for product_special in product_specials %}
                <tbody id="special-row{{ special_row }}">
                <tr>
                  <td class="text-left"><select name="product_special[{{ special_row }}][customer_group_id]" class="form-control">
                      {% for customer_group in customer_groups %}
                      {% if (customer_group['customer_group_id'] == product_special['customer_group_id']) %}
                      <option value="{{ customer_group['customer_group_id'] }}" selected="selected">{{ customer_group['name'] }}</option>
                      {% else %}
                      <option value="{{ customer_group['customer_group_id'] }}">{{ customer_group['name'] }}</option>
                      {% endif %}
                      {% endfor %}
                    </select></td>
                  <td class="text-right"><input type="text" name="product_special[{{ special_row }}][priority]" value="{{ product_special['priority'] }}" placeholder="{{ entry_quantity }}" class="form-control" /></td>
                  <td class="text-right"><input type="text" name="product_special[{{ special_row }}][price]" value="{{ product_special['price'] }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                  <td class="text-left"><div class="input-group date">
                      <input type="text" name="product_special[{{ special_row }}][date_start]" value="{{ product_special['date_start'] }}" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" />
                      <span class="input-group-btn">
                      <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                      </span></div></td>
                  <td class="text-left"><div class="input-group date">
                      <input type="text" name="product_special[{{ special_row }}][date_end]" value="{{ product_special['date_end'] }}" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" />
                      <span class="input-group-btn">
                      <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                      </span></div></td>
                  <td class="text-left"><button type="button" onclick="$('#special-row{{ special_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                </tr>
              </tbody>
              {% set special_row = special_row + 1 %}
              {% endfor %}
              <tfoot>
                <tr>
                  <td colspan="5"></td>
                  <td class="text-left"><button type="button" onclick="addSpecial();" data-toggle="tooltip" title="{{ button_add_special }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div><!--tab-special-->
        {% endif %}

        <!--tab-image-->
        {% set image_row = 0 %}
        {% if (mp_allowproducttabs['images'] is defined) %}
        <div class="tab-pane" id="tab-image">
          <div class="table-responsive">
            <table id="images" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <td class="text-left">{{ entry_image }}</td>
                  <td class="text-right">{{ entry_sort_order }}</td>
                  <td></td>
                </tr>
              </thead>
              {% for product_image in product_images %}
              <tbody id="image-row{{ image_row }}">
                <tr>
                  <td class="text-left">
                    <div style="width:110px;height:110px;overflow:hidden" class="img-thumbnail wk_upload_img">
                      <img id="thumb{{ image_row }}-thumb-image" src="{{ product_image['thumb'] ? product_image['thumb'] : placeholder }}" alt="" title=""/>
                    </div>
                    <input type="hidden" name="product_image[{{ image_row }}][image]" value="{{ product_image['thumg_img'] }}" id="thumb{{ image_row }}-target-image"/>
                    <div class="btn-group imgoption" style="width: 41%;">
                      <button class="btn btn-danger btn-sm delete_img" type="button">Remove</button>
                    </div>
                  </td>
                  <td class="text-right"><input type="text" name="product_image[{{ image_row }}][sort_order]" value="{{ product_image['sort_order'] }}" placeholder="{{ entry_sort_order }}" class="form-control" /></td>
                  <td class="text-left"><button type="button" onclick="$('#image-row{{ image_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                </tr>
               </tbody>
              {% set image_row = image_row + 1 %}
              {% endfor %}
              <tfoot>
                <tr>
                  <td colspan="2"></td>
                  <td class="text-left"><button type="button" onclick="addImage();" data-toggle="tooltip" title="{{ button_add_image }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div><!--tab-image-->
        {% endif %}

        {% if (mp_allowproducttabs['custom-field'] is defined) %}
        <div id="tab-custom-field" class="tab-pane">
          <div class="row">
            <div class="col-sm-3">
              <ul class="nav nav-pills nav-stacked" id="vtab-option">
                   {% set tabCount = 0 %} {% set wkcustom_option_row = 0 %}
                    {% if (wkPreCustomFields is not empty) %}
                      {% for tabs in wkPreCustomFields %}
                        <li>
                          <a href="#wktab-option-{{ tabCount }}" data-toggle="tab" id="wkoption-{{ tabCount }}" field-id = "wkoption-{{ tabs['fieldId'] }}"><i class="fa fa-minus-circle" onclick="$('#wkoption-{{ tabCount }}').remove(); $('#wktab-option-{{ tabCount }}').remove(); $('#vtab-option li a:first').trigger('click'); return false;"></i>{{ tabs["fieldName"] }}</a>
                        </li>
                      {% set tabCount = tabCount + 1 %}
                    {% endfor %}
                  {% endif %}
                  <li id="optionSelector">
                    <select name="wkcustomfield" class="form-control">
                      {% if (wkcustomFields is not empty) %}
                        <option value=""></option>
                           {% for field in wkcustomFields %}
                            <option value="{{ field['id'] }}" data-type = "{{ field['fieldType'] }}" data-name="{{ field['fieldName'] }}" data-des="{{ field['fieldDescription'] }}" title="{{ field['fieldDescription'] }}" data-isRequired = "{{ field['isRequired'] }}">
                              {{ field['fieldName'] }}
                            </option>
                           {% endfor %}
 {% endif %}

                    </select>
                  </li>
              </ul>
            </div>
            <div class="col-sm-9">
              <div class="tab-content" id="wk_customfieldcontent">
                 {% set tabCount = 0 %} {% set wkcustom_option_row = 0 %}
 {% if (wkPreCustomFields is not empty) %}
 {% for tabs in wkPreCustomFields %}
                      <div id="wktab-option-{{ tabCount }}" class="tab-pane">
                        <div class="alert alert-info">
                          <i class="fa fa-info-circle"></i>
                           {{ tabs['fieldDes'] }}
                        </div>
                        {% if (error is defined and error == tabs['fieldId']) %}
                            <div class="alert alert-danger">
                              <i class="fa fa-exclamation-circle"></i>
                              {{ error_warning_mandetory }}
                            </div>
                        {% endif %}
                        <input type="hidden" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_name]" value="{{ tabs['fieldName'] }}">
                        <input type="hidden" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_type]" value="{{ tabs['fieldType'] }}">
                        <input type="hidden" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_id]" value="{{ tabs['fieldId'] }}">
                        <input type="hidden" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_des]" value="{{ tabs['fieldDes'] }}">
                        <input type="hidden" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_is_required]" value="{{ tabs['isRequired'] }}">

                            {% if (tabs['fieldType'] == 'select') %}
                              <div class="form-group {% if (tabs['isRequired'] == 'yes') %} {{ 'required' }}{% endif %}">
                                <label class="col-sm-3 control-label">Select option:</label>
                                <div class="col-sm-9">
                                  <select class="form-control" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" >
                                     {% for options in tabs['preFieldOptions'] %}
                                      <option value="{{ options['optionId'] }}" {% if (tabs['fieldOptions'] is not empty) %} {% for option in tabs['fieldOptions'] %} {% if (option['optionId'] == options['optionId']) %} {{ "selected" }}{% endif %} {% endfor %} {% endif %} >
                                        {{ options['optionValue'] }}
                                      </option>
                                     {% endfor %}
                                  </select>
                                </div>
                               </div>

 {% elseif (tabs['fieldType'] == 'checkbox' or tabs['fieldType'] == 'radio' ) %}
                                <div class="form-group  {% if (tabs['isRequired'] == 'yes') %} {{ 'required' }}{% endif %}">
                                <label class="control-label col-sm-3">Select option:</label>
                                <div class="col-sm-9">
                               {% for options in tabs['preFieldOptions'] %}

                                  <div class="radio checkbox">
                                    <label for="{{ wkcustom_option_row~options['optionId'] }}">
                                      <input type='{{ tabs['fieldType'] }}' id="{{ wkcustom_option_row~options['optionId'] }}" value="{{ options['optionId'] }}" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" {% if (tabs['fieldOptions'] is not empty) %} {% for option in tabs['fieldOptions'] %} {% if (option['optionId'] == options['optionId']) %} {{ "checked" }}{% endif %} {% endfor %} {% endif %} />
                                      {{ options['optionValue'] }}
                                    </label>
                                  </div>

                              {% endfor %}
                               </div>
                              </div>
                              {% elseif (tabs['fieldType'] == 'text') %}
                                <div class="form-group {% if (tabs['isRequired'] == 'yes') %} {{ 'required' }}{% endif %}">
                                  <label class="col-sm-3 control-label">Enter Text:</label>
                                  <div class="col-sm-9">
                                    <input class="form-control" type="text" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" value="{% if (tabs['fieldOptions']['option_id'] is defined) %} {{ tabs['fieldOptions']['option_id'] }}{% endif %}" />
                                  </div>
                                </div>
                                 {% elseif (tabs['fieldType'] == 'textarea') %}
                                  <div class="form-group {% if (tabs['isRequired'] == 'yes') %} {{ 'required' }}{% endif %}">
                                    <label class="col-sm-3 control-label">Enter Text:</label>
                                    <div class="col-sm-9">
                                      <textarea class="form-control" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" rows="7" >
                                      {% if (tabs['fieldOptions']['option_id'] is defined) %} {{ tabs['fieldOptions']['option_id'] }}{% endif %}
                                    </textarea>
                                    </div>
                                  </div>
                                 {% elseif (tabs['fieldType'] == 'date') %}
                                  <div class="form-group {% if (tabs['isRequired'] == 'yes') %} {{ 'required' }}{% endif %}">
                                    <label class="col-sm-3 control-label">Select Date:</label>
                                    <div class="col-sm-6">
                                      <div class="input-group date">
                                        <input type="text" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" value="{% if (tabs['fieldOptions']['option_id'] is defined) %} {{ tabs['fieldOptions']['option_id'] }}{% endif %}" class="form-control">
                                        <span class="input-group-btn">
                                          <button type="button" class="btn btn-default">
                                            <i class="fa fa-calendar"></i>
                                          </button>
                                        </span>
                                      </div>
                                    </div>
                                  </div>
                                 {% elseif (tabs['fieldType'] == 'time') %}
                                  <div class="form-group {% if (tabs['isRequired'] == 'yes') %} {{ 'required' }}{% endif %}">
                                    <label class="col-sm-3 control-label">Enter Text:</label>
                                    <div class="col-sm-6">
                                      <div class="input-group time">
                                         <input class="form-control" type="text" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" value="{% if (tabs['fieldOptions']['option_id'] is defined) %} {{ tabs['fieldOptions']['option_id'] }}{% endif %}" >
                                        <span class="input-group-btn">
                                          <button type="button" class="btn btn-default">
                                            <i class="fa fa-clock-o"></i>
                                          </button>
                                        </span>
                                      </div>
                                    </div>
                                  </div>
                                   {% elseif (tabs['fieldType'] == 'datetime') %}
                                    <div class="form-group  {% if (tabs['isRequired'] == 'yes') %} {{ 'required' }}{% endif %}">
                                      <label class="col-sm-3 control-label">Select date-time:</label>
                                      <div class="col-sm-6">
                                        <div class="input-group datetime">
                                          <input type="text" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" value="{% if (tabs['fieldOptions']['option_id'] is defined) %} {{ tabs['fieldOptions']['option_id'] }}{% endif %}" class="form-control">
                                          <span class="input-group-btn">
                                            <button type="button" class="btn btn-default">
                                              <i class="fa fa-clock-o"></i>
                                            </button>
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                   {% endif %}
                            </div>
                          {% set tabCount = tabCount + 1 %} {% set wkcustom_option_row = wkcustom_option_row + 1 %}
               {% endfor %}
               {% endif %}
              </div>
            </div>
          </div>
        </div>
        {% endif %}
        <div class="tab-pane" id="tab-update-reason">
          <div class="form-group">
            <label class="col-sm-3 control-label" for="input-required">{{ "Select a reason" }}</label>
            <div class="col-sm-9">
              <select name="reason" class="form-control">
                {% if (reasons is not empty) %}
                  <option value=""></option>
                     {% for field in reasons %}
                      <option value="{{ field['id'] }}" title="{{ field['fieldDescription'] }}" {% if (reason is defined and reason and reason == field['id']) %} {{ "selected" }}{% endif %}>
                        {{ field['title'] }}
                      </option>
                     {% endfor %}
                 {% endif %}
              </select>
            </div>
          </div>
        </div>

        {% if wk_pricealert_status and wk_pricealert_allowed_seller %}
        <div class="tab-pane" id="tab-pricealert">
           <div class="form-group">
             <label class="col-sm-2 control-label" for="input-pricealert">{{ text_palert }}</label>
             <div class="col-sm-10">
               <select name="pricealert" id="input-prigetListcealert" class="form-control">
                 {% if is_alert_product %}
                   <option value="1" selected="selected">{{ text_enable }}</option>
                   <option value="0">{{ text_disable }}</option>
                  {% else %}
                  <option value="1" >{{ text_enable }}</option>
                  <option value="0" selected="selected">{{ text_disable }}</option>
                  {% endif %}
               </select>
             </div>
           </div>
         </div>
        {% endif %}

    </div><!--tab-content-->

    </form>
      {% else %}
        <div class="text-danger">
              {{ text_access }}
        </div>
      {% endif %}
    </fieldset>

    </div>  <!--content-->
    {{ column_right }}</div>   <!--row-->
  </div>  <!--container-->
{% endif %}

<div id="category-modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{ heading_category }}</h4>
      </div>
      <div class="modal-body" style="overflow:auto;">
       <div id="category-modal-body" style="display: inline-flex;width: 100%;"></div>
      </div>
      <div class="modal-footer">
        <!-- <div class="pull-left">
          <button type="button" class="btn btn-warning" id="category-modal-back">{{ button_back }}</button>
        </div> -->
        <div class="pull-right">
          <button type="button" class="btn btn-default" data-dismiss="modal">{{ button_close }}</button>
        </div>
      </div>
    </div>
  </div>
</div>
{% if (module_wk_seller_group_status ) %}
    <div id="myModalanswer" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel"></h3>
              </div>
            <div class="modal-body">
              <span id="alert" class="text-danger"></span>
            <h3 id="wk-open-list">{{ entry_list_header }}</h3>
              <table class="table table-bordered table-hover" id="details">
                <thead>
                  <tr>
                    <td>
                      {{ entry_name }}
                    </td>
                      <td>
                        {{ entry_quantity }}
                      </td>
                      <td>
                        {{ entry_price }}
                      </td>
                  <tr>
                </thead>
                <tbody>
                  {% for detail in sellerDetail %}
                    <tr>
                      <td>
                        {{ detail['name'] }}
                      </td>
                      <td>
                        {{ detail['quantity'] }}
                      </td>
                      <td>
                        {{ detail['price'] }}
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
            </table>
          </div>
            <div class="modal-footer">
              <button class="btn closebtn" data-dismiss="modal" aria-hidden="true" id="closeButton">Close</button>
            </div>
          </div>
        </div>
      </div>
  {% endif %}
<!-- script custom field -->

 <!-- membership codes starts here -->
<script type="text/javascript">
{% if (module_wk_seller_group_status is defined and module_wk_seller_group_status) %}
  listing_duration = 0;
  {% if (relist_duration is defined and relist_duration) %}
    listing_duration = {{ relist_duration }};
  {% endif %}
  var count = 0;
    function getListingDuration(gld_category_id) {
      $.ajax({
        url: 'index.php?route=account/customerpartner/wk_membership_catalog/getListingDuration',
        data: {category_id: gld_category_id},
        type: 'post',
        methodType: 'json',
        success: function(data) {

          $('#alert-danger').remove();
          $('#alert-info').remove();
          html = '';
          if(data) {
            for (var i = 1; i <= data; i++) {
              html += '<option value="'+i+'"';
              if(listing_duration == i) {
                html += ' selected ';
              }
              html += '>'+i+' day(s)</option>';
            };
            $('#input-relist-duration').html(html);
            if(count != 0) {
              $('.breadcrumb').after('<div class="alert alert-info" id="alert-info"><i class="fa fa-info-circle"></i> Listing duration has been refreshed as per category selection, please check it again.<button class="close" data-dismiss="alert" type="button">×</button></div>');
            } else {
              count++;
            }
          } else {
            html += '<option></option>';
            $('#input-relist-duration').html(html);
            $('.breadcrumb').after('<div class="alert alert-danger" id="alert-danger"><i class="fa fa-exclamation-circle"></i> Warning: No more listing duration is available!</div>');
            $('body').animate({
              scrollTop: 0,
            },'slow');
          }
        }
      });
    }
    var category = $('input[name="product_category[]"]').val();
    console.log(category);
    if (typeof category != 'undefined') {
       getListingDuration(category);
    } else {
      getListingDuration(0);
    }
{% endif %}
</script>
 <!-- membership codes ends here -->

<script type="text/javascript">

  $('#vtab-option a:first').tab('show');
    tabCount = '{{ tabCount }}';
    wkcustom_option_row = '{{ wkcustom_option_row }}';
    $('select[name="wkcustomfield"]').on('change',function(){
      value = $(this).val();
      if(value == ''){
        return;
      }

      if($('body').find('[field-id = wkoption-'+value+']').length){
        return;
      }
    fieldType = $('option:selected', this).attr('data-type');
    fieldName = $('option:selected', this).attr('data-name');
    fieldDes = $('option:selected', this).attr('data-des');
    fieldIsRequired = $('option:selected', this).attr('data-isRequired');
    tab = '<li><a href="#wktab-option-'+tabCount+'" data-toggle="tab" id="wkoption-'+tabCount+'" field-id = "wkoption-'+value+'"><i class="fa fa-minus-circle" onclick="$(\'#wkoption-' + tabCount + '\').remove(); $(\'#wktab-option-' + tabCount + '\').remove(); $(\'#vtab-option a:first\').trigger(\'click\'); return false;" /></i>&nbsp;'+fieldName+'</a></li>';
    $('#optionSelector').before(tab);
    html  = '';
    html += '<input type="hidden" name="product_custom_field['+wkcustom_option_row+'][custom_field_name]" value="'+fieldName+'">';
    html += '<input type="hidden" name="product_custom_field['+wkcustom_option_row+'][custom_field_type]" value="'+fieldType+'">';
    html += '<input type="hidden" name="product_custom_field['+wkcustom_option_row+'][custom_field_id]" value="'+value+'">';
    html += '<input type="hidden" name="product_custom_field['+wkcustom_option_row+'][custom_field_des]" value="'+fieldDes+'">';
    html += '<input type="hidden" name="product_custom_field['+wkcustom_option_row+'][custom_field_is_required]" value="'+fieldIsRequired+'">';
    if(fieldIsRequired == 'yes'){
      required = 'required';
    }else{
      required = '';
    }
    if(fieldType == "textarea"){

      html += '<div class="form-group '+required+' "><label class="col-sm-3 control-label">{{ entry_enter_text }}</label>';
      html += '<div class="col-sm-9"><textarea class="form-control" id="" value="" name="product_custom_field['+wkcustom_option_row+'][custom_field_value][]" row="7"></textarea></div></div>';
      addtoBody(html);

    }else if(fieldType == "text"){

      html += '<div class="form-group '+required+'"><label class="col-sm-3 control-label">{{ entry_enter_text }}</label>';
      html += '<div class="col-sm-9"><input type="text" class="form-control" name="product_custom_field['+wkcustom_option_row+'][custom_field_value][]" /></div></div>';
      addtoBody(html);

    }else if(fieldType == "time"){

      html += '<div class="form-group '+required+'"><label class="col-sm-3 control-label">{{ entry_select_time }}</label>';
      html += '<div class="col-sm-6"><div class="input-group time"><input type="text" name="product_custom_field['+wkcustom_option_row+'][custom_field_value][]" class="form-control" /><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-clock-o"></i></button</span></div</div></div>';

      addtoBody(html);

    }else if(fieldType == "datetime"){

      html += '<div class="form-group '+required+'"><label class="col-sm-3 control-label">{{ entry_select_datetime }}</label>';
      html += '<div class="col-sm-6"><div class="input-group datetime"><input type="text" name="product_custom_field['+wkcustom_option_row+'][custom_field_value][]" class="form-control" /><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button</span></div</div></div>';

      addtoBody(html);

    }else if(fieldType == "date"){

      html += '<div class="form-group '+required+'">';
      html += '<label class="col-sm-3 control-label">{{ entry_select_date }}</label>';
      html += '<div class="col-sm-6"><div class="input-group date">';
      html += '<input type="text" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" class="form-control">';
      html += '<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div></div>';

      addtoBody(html);

    }else{
      $.ajax({
        url:'index.php?route=account/customerpartner/addproduct/getOptions',
        data:'&value='+value,
        dataType:'json',
        type:'post',
        success:function(data){
          innerHtml = '';
          if(fieldType == "select"){
            html += '<div class="form-group '+required+'"><label class="col-sm-3 control-label">Options</label><div class="col-sm-9" >';
          }else{
            html += '<div class="form-group '+required+'"><label class="control-label">Options</label><div>';
          }
          $.each(data, function(key,val){
            if(fieldType == "select"){
              innerHtml += '<option value="' + val.optionId +'">' + val.optionValue + '</option>'
            }else if(fieldType == "checkbox"){

              html += '<div class="radio checkbox"><label for="'+ wkcustom_option_row + val.optionId +'"><input type='+fieldType+' id="'+ wkcustom_option_row + val.optionId +'" value="'+val.optionId+'" name="product_custom_field['+wkcustom_option_row+'][custom_field_value][]">'+val.optionValue+'</lable></div>';

            }else{

              html += '<div class="radio checkbox"><label for="'+ wkcustom_option_row + val.optionId +'"><input type='+fieldType+' id="'+ wkcustom_option_row + val.optionId +'" value="'+val.optionId+'" value="'+val.optionId+'" name="product_custom_field['+wkcustom_option_row+'][custom_field_value][]">'+val.optionValue+'</lable></div>';

            }
          });
          if(fieldType == "select") {
            html += '<select class="form-control" name="product_custom_field['+wkcustom_option_row+'][custom_field_value][]">'+innerHtml+'</select>';
          }
          addtoBody(html);
        }
      })
    }
  });

  function addtoBody(html){
    html = '<div id="wktab-option-'+tabCount+'" class="tab-pane"><div class="alert alert-info"><i class="fa fa-info-circle"></i> ' + fieldDes + '</div>' + html + '</div></div></div>';
    $('#wk_customfieldcontent').append(html);
    $('#wkoption-' + tabCount).trigger('click');
    tabCount++;
    wkcustom_option_row++;

    $('.date').datetimepicker({
      pickTime: false
    });

    $('.time').datetimepicker({
      pickDate: false
    });

    $('.datetime').datetimepicker({
      pickDate: true,
      pickTime: true
    });
  }
  $('.date').datetimepicker({
    pickTime: false
  });

  $('.time').datetimepicker({
    pickDate: false
  });

  $('.datetime').datetimepicker({
    pickDate: true,
    pickTime: true
  });
</script>
<!-- script end here -->
<script src="catalog/view/javascript/wk_common.js"></script>
<script type="text/javascript"><!--
{% for language in languages %}
  $('#input-description{{ language['language_id'] }}').summernote({
    height: 300,
  });
{% endfor %}

$('.data-date').datetimepicker({
    pickTime: false
});

$('.tab-content').on('click','.click-file',function(){
  $(this).prev().trigger('click');
})

$(function() {
   $("body").on("change","input[type='file']", function() {
    $.this = this;
       var files = !!this.files ? this.files : [];
       if (!files.length || !window.FileReader) return; /* no file selected, or no FileReader support */
       if (/^image/.test( files[0].type)) { /* only image file */
           var reader = new FileReader(); /* instance of the FileReader */
           reader.readAsDataURL(files[0]); /* read the local file */

           reader.onloadend = function() { /* set image to display only */
               src = this.result;
               $($.this).next().attr('src',src);
           }
       }
   });
});

//--></script>

{% if (mp_allowproducttabs['links'] is defined and mp_allowproducttabs['links']) %}
<script type="text/javascript"><!--
$('input[name=\'manufacturer\']').click(function() {
  $(this).autocomplete("search");
});
// Manufacturer
$('input[name=\'manufacturer\']').autocomplete({
  minLength: 0,
  delay: 101,
  source: function(request, response) {
    $.ajax({
      url: 'index.php?route=customerpartner/autocomplete/manufacturer&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        json.unshift({
          manufacturer_id: 0,
          name: '{{ text_none }}'
        });
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['manufacturer_id']
          }
        }));
      }
    });
  },
  select: function(item) {
    $('input[name=\'manufacturer\']').val(item['label']);
    $('input[name=\'manufacturer_id\']').val(item['value']);

    return false;
  },
  focus: function(item) {
      return false;
   }
});


$('input[name=\'category\']').click(function(){
  $(this).next('ul').remove();
  $(this).autocomplete("search");
});

// Category
$('input[name=\'category\']').autocomplete({
  minLength: 0,
  delay: 101,
  source: function(request, response) {
    $.ajax({
      url: 'index.php?route=customerpartner/autocomplete/category&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['category_id']
          }
        }));
      }
    });
  },
  select: function(item) {
    {% if (mp_allowproducttabs['attribute'] is defined and mp_allowproducttabs['attribute']) %}
      addCategoryAttribute(item);
    {% endif %}
  // <!-- membership codes starts here -->
     {% if (module_wk_seller_group_status and module_wk_seller_group_single_category is defined and module_wk_seller_group_single_category) %}
       $('input[name=\'category\']').val('');
    $('#product-category' + item['value']).remove();

    $('#product-category').append('<div id="product-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_category[]" value="' + item['value'] + '" /></div>');

    $('#product-category div:odd').attr('class', 'odd');
    $('#product-category div:even').attr('class', 'even');
      {% if (module_wk_seller_group_status) %}
        getListingDuration(item['value']);
      {% endif %}
    {% else %}
    $('input[name=\'category\']').val('');
    $('#product-category' + item['value']).remove();

    $('#product-category').append('<div id="product-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_category[]" value="' + item['value'] + '" /></div>');

    $('#product-category div:odd').attr('class', 'odd');
    $('#product-category div:even').attr('class', 'even');
    {% endif %}
     //<!-- membership codes ends here -->

    return false;
  },
  focus: function(item) {
      return false;
   }
});
$('#product-category').delegate('.fa-minus-circle', 'click', function() {
  let that = parseInt($(this).siblings("input[type='hidden']").val());
  let bool = false;
  let arr = [];
  $.map(obj, function (value, index){
    if( obj.length == 0 )
    obj = value.filter(function(n){ return n != undefined });
  })
  $.map(obj, function (value, index){
    if( value != undefined && typeof value != undefined ){
      if( value['category_id'] == that) {
        $.each(value.attribute_id, function (index_in, value_in){
          $.map($('#attribute').find("tbody"), function (value_in_in, index_in_in){
            $.map($(value_in_in).find("input[type='hidden']"), function (val, i){
              if( parseInt(val['value']) == parseInt(value_in) ) {
                let k = $(value_in_in['id'])['selector'];
                arr.push(parseInt(value_in));
                $('#' + k).remove();
                return bool = true;
              }
            })
          });
        });
      }
    }
    if( bool ){
      if( arr.length > 0 ) {
        $.map(arr, function(val, i){
            if(attr_ids.includes(val)){
              $.map(attr_ids, function(val_in, i_in){
                if( val == val_in ){
                  delete attr_ids[i_in];
                }
              })
            }
        })
      }
      attr_ids = attr_ids.filter(function(n){ return n != undefined });
      obj.splice(index, 1);
      return true;
    }
  });
  $(this).parent().remove();
  $('#product-category div:odd').attr('class', 'odd');
  $('#product-category div:even').attr('class', 'even');
});


$('input[name=\'filter\']').click(function(){
  $(this).autocomplete("search");
});

// Filter
$('input[name=\'filter\']').autocomplete({
  minLength: 0,
  delay: 101,
  source: function(request, response) {
    $.ajax({
      url: 'index.php?route=customerpartner/autocomplete/filter&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['filter_id']
          }
        }));
      }
    });
  },
  select: function(item) {
    $('input[name=\'filter\']').val('');
    $('#product-filter' + item['value']).remove();

    $('#product-filter').append('<div id="product-filter' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_filter[]" value="' + item['value'] + '" /></div>');

    $('#product-filter div:odd').attr('class', 'odd');
    $('#product-filter div:even').attr('class', 'even');

    return false;
  },
  focus: function(item) {
      return false;
   }
});

$('#product-filter').delegate('.fa-minus-circle', 'click', function() {
  $(this).parent().remove();
  $('#product-filter div:odd').attr('class', 'odd');
  $('#product-filter div:even').attr('class', 'even');
});

$('input[name=\'download\']').click(function(){
  $(this).autocomplete("search");
});

// Downloads
$('input[name=\'download\']').autocomplete({
  minLength: 0,
  delay: 101,
  source: function(request, response) {
    $.ajax({
      url: 'index.php?route=customerpartner/autocomplete/download&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['download_id']
          }
        }));
      }
    });
  },
  select: function(item) {
    $('input[name=\'download\']').val('');
    $('#product-download' + item['value']).remove();

    $('#product-download').append('<div id="product-download' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_download[]" value="' + item['value'] + '" /></div>');

    $('#product-download div:odd').attr('class', 'odd');
    $('#product-download div:even').attr('class', 'even');

    return false;
  },
  focus: function(item) {
      return false;
   }
});

$('#product-download').delegate('.fa-minus-circle', 'click', function() {
  $(this).parent().remove();
  $('#product-download div:odd').attr('class', 'odd');
  $('#product-download div:even').attr('class', 'even');
});

$('input[name=\'related\']').click(function(){
  $(this).autocomplete("search");
});
// Related
$('input[name=\'related\']').autocomplete({
  minLength: 0,
  delay: 101,
  source: function(request, response) {
    $.ajax({
      url: 'index.php?route=customerpartner/autocomplete/product&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['product_id']
          }
        }));
      }
    });
  },
  select: function(item) {
    $('input[name=\'related\']').val('');
    $('#product-related' + item['value']).remove();

    $('#product-related').append('<div id="product-related' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_related[]" value="' + item['value'] + '" /></div>');

    $('#product-related div:odd').attr('class', 'odd');
    $('#product-related div:even').attr('class', 'even');

    return false;
  },
  focus: function(item) {
      return false;
   }
});

$('#product-related').delegate('.fa-minus-circle', 'click', function() {
  $(this).parent().remove();
  $('#product-related div:odd').attr('class', 'odd');
  $('#product-related div:even').attr('class', 'even');
});
//--></script>
{% endif %}

{% if (mp_allowproducttabs['attribute'] is defined and mp_allowproducttabs['attribute']) %}
<script type="text/javascript"><!--

var option_row = {{ option_row }};
let options = [];
let uniqeOptions = [];
let option_ids = [];
function addCategoryOption(elem) {
  $.ajax({
    url      : 'index.php?route=customerpartner/autocomplete/categoryOptions&category_id=' + elem.value,
    dataType : 'json',
    success  : function(json) {
      $.each(json, function(index, value) {
        let flg = true;
        if(value['value'] != undefined){
         option = {};
         option = {
           option_id: value['value'],
           name: value['label'],
         };
          options.push(option);
        }
        console.log(value);
      _addOptions(value);
      });
    }
  });
}


var attribute_row = {{ attribute_row }};
let obj = [];
let increment = 0;
let attr_ids = [];
function addCategoryAttribute(item)  {
  let bool = false;
  let copyAttributes = [];
  if (item.value) {
    $.ajax({
      url: 'index.php?route=customerpartner/autocomplete/categoryAttribute&category_id=' + item.value,
      dataType: 'json',
      success: function(json) {
        let array = [];
        array['category_id'] = item.value;
        array['attribute_id'] = [];
        $.each(json, function(index, value) {
          let val = parseInt(value['attribute_id']);
          if( array ){
            $.map(obj, function (value_in, index_in){
               if( value_in != undefined && value_in['attribute_id'] == val){
                 bool = true;
               }
            });
            if( bool ) {
              return;
            }
          }
          if(attr_ids.includes(val) ){
            copyAttributes.push(val);
          } else {
            attr_ids.push(val);
          }

          array['attribute_id'].push(val);
        })
        if( !increment ) {
          obj[increment] = array;
          increment++;
        } else {
          let bool2 = false;
          obj = obj.filter(function(n){ return n != undefined });
          // console.log(obj, 'new');
          $.map(obj, function (value, index){
            if( value != null || value != undefined ){
              if( obj.length == 0 ){
                return true;
              }
              if( value.category_id == item.value ) {
                bool2 = true;
                bool = true;
              }
            }
          })
          if( !bool2 ) {
            obj[increment] = array;
            increment++;
          }
        }
        $.each(json, function() {
            let attr_id = parseInt(this.attribute_id);
            let bool_in = false;
            $.map(copyAttributes, function (value, index){
              if( typeof value != 'number' )
               return true;
               // console.log(typeof attr_id, 'attr_id', attr_id, value);
              if ( attr_id == value ) {
                delete copyAttributes[index];
                return bool_in = true;
              }
            })
            if( bool_in ) {
              copyAttributes = copyAttributes.filter(function(n){ return n != undefined });
              return true;
            }
            addAttribute();
            var category_attribute_row = attribute_row -1;
            $('input[name=\'product_attribute[' + category_attribute_row + '][name]\']').val(this.name);
            $('input[name=\'product_attribute[' + category_attribute_row + '][attribute_id]\']').val(this.attribute_id);
        });
      }
    });
  }
}

function addAttribute() {
  html  = '<tbody id="attribute-row' + attribute_row + '">';
    html += '  <tr>';
  html += '    <td class="text-left"><input type="text" name="product_attribute[' + attribute_row + '][name]" value="" placeholder="{{ entry_attribute }}" class="form-control" /><input type="hidden" name="product_attribute[' + attribute_row + '][attribute_id]" value="" /></td>';
  html += '    <td class="text-left">';
  {% for language in languages %}
  html += '<div class="input-group"><span class="input-group-addon"><img src="catalog/language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span><textarea name="product_attribute[' + attribute_row + '][product_attribute_description][{{ language['language_id'] }}][text]" rows="5" placeholder="{{ entry_text }}" class="form-control"></textarea></div> ';
    {% endfor %}
  html += '    </td>';
  html += '    <td class="text-left"><button type="button" onclick="$(\'#attribute-row' + attribute_row + '\').remove(); $(\'.tooltip.in\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
    html += '  </tr>';
    html += '</tbody>';

  $('#attribute tfoot').before(html);

  attributeautocomplete(attribute_row);

  $('input[name=\'product_attribute[' + attribute_row + '][name]\']').click(function(){
      $(this).autocomplete("search");
  });

  attribute_row++;
}

function attributeautocomplete(attribute_row) {
  $('input[name=\'product_attribute[' + attribute_row + '][name]\']').autocomplete({
    minLength: 0,
    delay: 101,
    source: function(request, response) {
      $.ajax({
        url: 'index.php?route=customerpartner/autocomplete/attribute&filter_name=' +  encodeURIComponent(request),
        dataType: 'json',
        success: function(json) {
          response($.map(json, function(item) {
            return {
              category: item.attribute_group,
              label: item.name,
              value: item.attribute_id
            }
          }));
        }
      });
    },
    select: function(item) {
      $('input[name=\'product_attribute[' + attribute_row + '][name]\']').val(item['label']);
      $('input[name=\'product_attribute[' + attribute_row + '][attribute_id]\']').val(item['value']);

      return false;
    },
    focus: function(item) {
          return false;
      }
  });
}

$('#attribute tbody').each(function(index, element) {
  attributeautocomplete(index);
});
 //--></script>
{% endif %}

{% if (mp_allowproducttabs['options'] is defined and mp_allowproducttabs['options']) %}
<script type="text/javascript"><!--


$('input[name=\'option\']').autocomplete({
  minLength: 0,
  delay: 101,
  source: function(request, response) {
    $.ajax({
      url: 'index.php?route=customerpartner/autocomplete/option&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            category: item.category,
            label: item.name,
            value: item.option_id,
            type: item.type,
            option_value: item.option_value
          }
        }));
      }
    });
  },
  select: function(item) {
     _addOptions(item);
    return false;
  },
  focus: function(item) {
      return false;
   }
});
function _addOptions(item) {
  html  = '';
  html  = '<div class="tab-pane" id="tab-option' + option_row + '">';
  html += ' <input type="hidden" name="product_option[' + option_row + '][product_option_id]" value="" />';
  html += ' <input type="hidden" name="product_option[' + option_row + '][name]" value="' + item['label'] + '" />';
  html += ' <input type="hidden" name="product_option[' + option_row + '][option_id]" value="' + item['value'] + '" />';
  html += ' <input type="hidden" name="product_option[' + option_row + '][type]" value="' + item['type'] + '" />';

  html += ' <div class="form-group">';
  html += '   <label class="col-sm-3 control-label" for="input-required' + option_row + '">{{ entry_required }}</label>';
  html += '   <div class="col-sm-9"><select name="product_option[' + option_row + '][required]" id="input-required' + option_row + '" class="form-control">';
  html += '       <option value="1">{{ text_yes }}</option>';
  html += '       <option value="0">{{ text_no }}</option>';
  html += '   </select></div>';
  html += ' </div>';

  if (item['type'] == 'text') {
    html += ' <div class="form-group">';
    html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
    html += '   <div class="col-sm-9"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control" /></div>';
    html += ' </div>';
  }

  if (item['type'] == 'textarea') {
    html += ' <div class="form-group">';
    html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
    html += '   <div class="col-sm-9"><textarea name="product_option[' + option_row + '][option_value]" rows="5" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control"></textarea></div>';
    html += ' </div>';
  }

  if (item['type'] == 'file') {
    html += ' <div class="form-group" style="display: none;">';
    html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
    html += '   <div class="col-sm-9"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control" /></div>';
    html += ' </div>';
  }

  if (item['type'] == 'date') {
    html += ' <div class="form-group">';
    html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
    html += '   <div class="col-sm-3"><div class="input-group date"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
    html += ' </div>';
  }

  if (item['type'] == 'time') {
    html += ' <div class="form-group">';
    html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
    html += '   <div class="col-sm-9"><div class="input-group time"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" data-date-format="HH:mm" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
    html += ' </div>';
  }

  if (item['type'] == 'datetime') {
    html += ' <div class="form-group">';
    html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
    html += '   <div class="col-sm-9"><div class="input-group datetime"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
    html += ' </div>';
  }

  if (item['type'] == 'select' || item['type'] == 'radio' || item['type'] == 'checkbox' || item['type'] == 'image') {
    html += '<div class="table-responsive">';
    html += '  <table id="option-value' + option_row + '" class="table table-striped table-bordered table-hover">';
    html += '    <thead>';
    html += '      <tr>';
    html += '        <td class="text-left">{{ entry_option_value }}</td>';
    html += '        <td class="text-right">{{ entry_quantity }}</td>';
    html += '        <td class="text-left">{{ entry_subtract }}</td>';
    html += '        <td class="text-right">{{ entry_price }}</td>';
    html += '        <td class="text-right">{{ entry_option_points }}</td>';
    html += '        <td class="text-right">{{ entry_weight }}</td>';
    html += '        <td></td>';
    html += '      </tr>';
    html += '    </thead>';
    html += '    <tbody>';
    html += '    </tbody>';
    html += '    <tfoot>';
    html += '      <tr>';
    html += '        <td colspan="6"></td>';
    html += '        <td class="text-left"><button type="button" onclick="addOptionValue(' + option_row + ');" data-toggle="tooltip" title="{{ button_add_option_value }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>';
    html += '      </tr>';
    html += '    </tfoot>';
    html += '  </table>';
    html += '</div>';

      html += '  <select id="option-values' + option_row + '" style="display: none;">';

          for (i = 0; i < item['option_value'].length; i++) {
      html += '  <option value="' + item['option_value'][i]['option_value_id'] + '">' + item['option_value'][i]['name'] + '</option>';
          }

          html += '  </select>';
    html += '</div>';
  }

  $('#tab-option .tab-content').append(html);

  $('#option > li:last-child').before('<li><a href="#tab-option' + option_row + '" data-toggle="tab"><i class="fa fa-minus-circle" onclick="$(\'a[href=\\\'#tab-option' + option_row + '\\\']\').parent().remove(); $(\'#tab-option' + option_row + '\').remove(); $(\'#option a:first\').tab(\'show\')"></i> ' + item['label'] + '</li>');

  $('#option a[href=\'#tab-option' + option_row + '\']').tab('show');

  $('.date').datetimepicker({
    pickTime: false
  });

  $('.time').datetimepicker({
    pickDate: false
  });

  $('.datetime').datetimepicker({
    pickDate: true,
    pickTime: true
  });

  option_row++;
}
//--></script>
<script type="text/javascript"><!--
var option_value_row = {{ option_value_row }};


function addOptionValue(option_row) {
  html  = '<tbody id="option-value-row' + option_value_row + '">';
  html += '<tr>';
  html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][option_value_id]" style="min-width: 60px;" class="form-control">';
  html += $('#option-values' + option_row).html();
  html += '  </select><input type="hidden" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][product_option_value_id]" value="" /></td>';
  html += '  <td class="text-right"><input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][quantity]" value="" placeholder="{{ entry_quantity }}" class="form-control" /></td>';
  html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][subtract]" class="form-control">';
  html += '    <option value="1">{{ text_yes }}</option>';
  html += '    <option value="0">{{ text_no }}</option>';
  html += '  </select></td>';
  html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price_prefix]" class="form-control">';
  html += '    <option value="+">+</option>';
  html += '    <option value="-">-</option>';
  html += '  </select>';
  html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
  html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][points_prefix]" class="form-control">';
  html += '    <option value="+">+</option>';
  html += '    <option value="-">-</option>';
  html += '  </select>';
  html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][points]" value="" placeholder="{{ entry_points }}" class="form-control" /></td>';
  html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight_prefix]" class="form-control">';
  html += '    <option value="+">+</option>';
  html += '    <option value="-">-</option>';
  html += '  </select>';
  html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight]" value="" placeholder="{{ entry_weight }}" class="form-control" /></td>';
  html += '  <td class="text-left"><button type="button" onclick="$(\'#option-value-row' + option_value_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
  html += '</tr>';
  html +='</tbody>;';

  $('#option-value' + option_row + ' tfoot').before(html);

  option_value_row++;
}
//--></script>
{% endif %}

{% if (mp_allowproducttabs['discount'] is defined and mp_allowproducttabs['discount']) %}
<script type="text/javascript"><!--
var discount_row = {{ discount_row }};

function addDiscount() {
  html = '<tbody id="discount-row' + discount_row + '">';
  html  += '<tr>';
  html += '  <td class="text-left"><select name="product_discount[' + discount_row + '][customer_group_id]" class="form-control">';
    {% for customer_group in customer_groups %}
    html += '    <option value="{{ customer_group['customer_group_id'] }}">{{ customer_group['name']|escape }}</option>';
    {% endfor %}
    html += '  </select></td>';
    html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][quantity]" value="" placeholder="{{ entry_quantity }}" class="form-control" /></td>';
    html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][priority]" value="" placeholder="{{ entry_priority }}" class="form-control" /></td>';
  html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
  html += '  <td class="text-left"><div class="input-group date"><input type="text" name="product_discount[' + discount_row + '][date_start]" value="" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
  html += '  <td class="text-left"><div class="input-group date"><input type="text" name="product_discount[' + discount_row + '][date_end]" value="" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
  html += '  <td class="text-left"><button type="button" onclick="$(\'#discount-row' + discount_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
  html += '</tr>';
  html += '</tbody>';

   $('#discount tfoot').before(html);

  $('.date').datetimepicker({
    pickTime: false
  });

  discount_row++;
}
//--></script>
{% endif %}

{% if (mp_allowproducttabs['special'] is defined and mp_allowproducttabs['special']) %}
<script type="text/javascript"><!--
var special_row = {{ special_row }};

function addSpecial() {
  html = '<tbody id="special-row' + special_row + '">'
  html  += '<tr>';
    html += '  <td class="text-left"><select name="product_special[' + special_row + '][customer_group_id]" class="form-control">';
    {% for customer_group in customer_groups %}
    html += '      <option value="{{ customer_group['customer_group_id'] }}">{{ customer_group['name']|escape }}</option>';
    {% endfor %}
    html += '  </select></td>';
    html += '  <td class="text-right"><input type="text" name="product_special[' + special_row + '][priority]" value="" placeholder="{{ entry_priority }}" class="form-control" /></td>';
  html += '  <td class="text-right"><input type="text" name="product_special[' + special_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
    html += '  <td class="text-left"><div class="input-group date"><input type="text" name="product_special[' + special_row + '][date_start]" value="" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
  html += '  <td class="text-left"><div class="input-group date"><input type="text" name="product_special[' + special_row + '][date_end]" value="" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
  html += '  <td class="text-left"><button type="button" onclick="$(\'#special-row' + special_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
  html += '</tr>';
  html += '</tbody>';

 $('#special tfoot').before(html);

  $('.date').datetimepicker({
    pickTime: false
  });

  special_row++;
}
//--></script>
{% endif %}

<script type="text/javascript"><!--
var image_row = {{ image_row }};

function addImage() {
  html  = '<tbody id="image-row' + image_row + '">';
  html += '  <tr>';
  html += '  <td class="text-left"><div style="width:110px;height:110px;overflow:hidden" class="img-thumbnail wk_upload_img"><img id="thumb' + image_row + '-thumb-image" src="{{ placeholder }}" alt="" title=""/></div><input type="hidden" name="product_image[' + image_row + '][image]" value="" id="thumb' + image_row + '-target-image"/><div class="btn-group imgoption" style="width: 41%;"><button class="btn btn-danger btn-sm delete_img" type="button">Remove</button></div></td>';
  html += '  <td class="text-right"><input type="text" name="product_image[' + image_row + '][sort_order]" value="" placeholder="{{ entry_sort_order }}" class="form-control" /></td>';
  html += '  <td class="text-left"><button type="button" onclick="$(\'#image-row' + image_row  + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
  html += '</tr>';
  html += '</tbody>';

  $('#images tfoot').before(html);

  image_row++;

}
//--></script>
  <script type="text/javascript"><!--
$('#language a:first').tab('show');
$('#option a:first').tab('show');
//--></script></div>

 <!-- membership codes starts here -->

   <!-- membership codes ends here -->
   <script>
      var wk_addproduct = {
       'choose_categories':[],
       'getcategories':function(category_id){
         $.ajax({
           url: 'index.php?route=account/customerpartner/addproduct/getcategories&category_id=' + category_id,
           type: 'get',
           dataType: 'json',
           success: function(json) {
             if (json['categories']) {
               let length = $('.category-box').length;
                if( length > 1 ){
                    let x = parseInt($('.category-box:nth-child(' + length + ') > .wk_pd_category').attr('data-categoty-id'));
                    if( x == parseInt(json['categories'][0]['category_id']) ) {
                      return;
                    }
                }
                var html = '';
                html += '<div class="category-box">';
               $(json['categories']).each(function(index, value){
                 html += '<p class="wk_pd_category" data-categoty-id = "' + value.category_id + '">' + value.name + '</p>';
               });
               html += '</div>';
               $(document).find("#category-modal-body").append(html);
             }else{
               if (wk_addproduct.choose_categories) {
                 $(wk_addproduct.choose_categories).each(function(index, item){

                   {% if (mp_allowproducttabs['attribute'] is defined and mp_allowproducttabs['attribute']) %}
                     addCategoryAttribute(item);
                   {% endif %}

                   addCategoryOption(item);

                   $(document).find('#product-category' + item['value']).remove();

                   $(document).find('#product-category').append('<div id="product-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_category[]" value="' + item['value'] + '" /></div>');

                   $(document).find('#product-category div:odd').attr('class', 'odd');
                   $(document).find('#product-category div:even').attr('class', 'even');
                 });

                 $(document).find("#category-modal").modal("hide");
               }
             }
           },
           error: function(xhr, ajaxOptions, thrownError) {
             alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
           }
         });
       },
     };

     $(document).delegate('#input-category', 'click', function(){
       wk_addproduct.choose_categories = [];
       $(document).find("#category-modal-body").empty();
       wk_addproduct.getcategories(0);
     });

     $(document).delegate('.wk_pd_category', 'click', function(){
       wk_addproduct.choose_categories = [];
       $(this).parent(".category-box").nextAll().remove();
       $(this).parent(".category-box").find(".wk_pd_category").removeClass('wk_category_select');
       $(this).addClass('wk_category_select');

       $($(document).find(".category-box > .wk_category_select")).each(function(index, value){
          var wk_category = {label: $(value).text(),value: $(value).data("categoty-id")};
          wk_addproduct.choose_categories.push(wk_category);
       });

       wk_addproduct.getcategories($(this).data("categoty-id"));
       {% if(module_wk_seller_group_status) %}
        getListingDuration($(this).data("categoty-id"));
      {% endif %}
     });

     $(document).delegate('.fa-minus-circle', 'click', function() {
       $(this).parent().remove();
       $(document).find('#product-category div:odd').attr('class', 'odd');
       $(document).find('#product-category div:even').attr('class', 'even');

       var categories = [];
     $('input[name="product_category[]"]').each(function() {
         categories.push($(this).val());
     });
       if (typeof categories != 'undefined' && categories.length) {
          getListingDuration(categories);
       } else {
         getListingDuration(0);
       }

     });
   </script>
   <style type="text/css">
     .imgoption{
       display: block;
       margin-top: 5px;
       width: 18%;
     }

     .imgoption button {
       width: 100%;
     }

     .category-box{
       min-width: 20%;
       padding: 20px;
       height: 200px;
       background-color: #f3f3f3;
       margin-right: 3px;
       border: 2px solid #ede9e4;
       border-radius: 7px;
       float: left;
       position: relative;
       overflow-y: auto;
       margin-top: 0;
       box-sizing: border-box;
     }

     .wk_category_select{
       color: blue;
     }
   </style>
{{ footer }}
